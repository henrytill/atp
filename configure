#!/bin/sh

check_python_module() {
  printf "checking for Python module %s... " $1
  python3 -c "import $1" >/dev/null 2>&1
  if [ $? -eq 0 ]; then
    printf "yes\n"
    return 0
  else
    printf "no\n"
    return 1
  fi
}

write_extra_mk_cram() {
  cat <<EOF >extra.mk
.PHONY: cram
cram: bin/main.byte
	python3 -m cram test/intro.t test/prop_logic.t
EOF
}

if check_python_module "cram"; then
  write_extra_mk_cram
fi

printf "OK\n"
